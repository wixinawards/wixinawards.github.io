<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wixin Awards - Wixcelo Community</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <style>
    @font-face {
      font-family: 'Arvo';
      font-style: normal;
      font-weight: 400;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/arvo/v22/tDbD2oWUg0MKqScQ7Z7o_vo.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
    body {
      font-family: 'Arvo', serif;
    }
  </style>
  <script type="module">
    // Firebase configuration
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getDatabase, ref, set, get, onValue } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

    // TODO: Replace with your Firebase config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);

    let isAdmin = false;
    let selectedYear = '2025';
    let editingCategory = null;

    const defaultData = {
      '2025': {
        eventDate: 'December 20, 2025',
        categories: [
          { 
            name: "MOST ACTIVE VIEWER", 
            icon: "üëë", 
            winner: "Axiel_TM", 
            nominees: ["Axiel_TM", "Peeks", "Snazz", "Muzwt"] 
          },
          { 
            name: "BEST VIEWER BUILD", 
            icon: "üèóÔ∏è", 
            winner: "Elliot's Little Pond", 
            nominees: ["Elliot's Little Pond", "OGBuildz's Megabase", "Muzwt's Cafe", "Water's Boss Arena"] 
          },
          { 
            name: "BEST WIXCELO MOMENT", 
            icon: "‚ú®", 
            winner: "Halftime show", 
            nominees: ["Halftime show", "Wixcelo saying \"Sheep come give me the meat.\"", "VC Revolution", "Wixcelo playing on the Minecraft server"] 
          },
          { 
            name: "BEST MODERATOR", 
            icon: "üõ°Ô∏è", 
            winner: "EReaso", 
            nominees: ["EReaso", "Peeks", "Axiel_TM", "Muzwt"] 
          },
          { 
            name: "BEST WIXCELO LIVESTREAM", 
            icon: "üé•", 
            winner: "Building Treehouse", 
            nominees: ["Building Treehouse", "Zombie Survival", "Hypixel Build Battle", "Playing Minecraft server"] 
          },
          { 
            name: "BEST WIXCELO SHORT", 
            icon: "üì±", 
            winner: "The 7 steps to paths", 
            nominees: ["The 7 steps to paths", "The 6 steps to a pond", "The 6 steps to a Basement", "The 5 steps to bridges"] 
          },
          { 
            name: "BEST WIXCELO VIDEO", 
            icon: "üé¨", 
            winner: "17 build ideas for your Minecraft survival world", 
            nominees: [
              "17 build ideas for your Minecraft survival world", 
              "The problem with \"starter houses\" in minecraft", 
              "These 4 mods REVOLUTIONIZE first person Minecraft", 
              "7 Practical resource packs for Survival Minecraft"
            ] 
          },
          { 
            name: "MOST LIKELY TO BECOME A MODERATOR", 
            icon: "‚≠ê", 
            winner: "Snazz", 
            nominees: ["Snazz", "Sensei", "Elliot", "Jacer11"] 
          },
          { 
            name: "BEST WIXCELO BUILD", 
            icon: "üèõÔ∏è", 
            winner: "Bill Cypher", 
            nominees: ["Bill Cypher", "Treehouse", "Cave", "Medieval Kitchen"] 
          }
        ]
      }
    };

    async function initializeData() {
      const dataRef = ref(database, 'awards');
      const snapshot = await get(dataRef);
      if (!snapshot.exists()) {
        await set(dataRef, defaultData);
      }
      loadData();
    }

    function loadData() {
      const dataRef = ref(database, 'awards');
      onValue(dataRef, (snapshot) => {
        const data = snapshot.val() || defaultData;
        renderPage(data);
      });
    }

    async function saveData(data) {
      const dataRef = ref(database, 'awards');
      await set(dataRef, data);
    }

    function renderPage(awardsData) {
      const currentYearData = awardsData[selectedYear] || { categories: [], eventDate: 'TBA' };
      
      document.getElementById('app').innerHTML = `
        <!-- Password Modal -->
        <div id="passwordModal" class="fixed inset-0 bg-black/80 flex items-center justify-center z-50 hidden">
          <div class="bg-purple-900/95 rounded-xl p-8 max-w-md w-full mx-4 border-2 border-pink-400">
            <div class="flex items-center justify-between mb-6">
              <h3 class="text-2xl font-bold text-white">Admin Access</h3>
              <button onclick="closePasswordModal()" class="text-white hover:text-pink-400">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
              </button>
            </div>
            <form onsubmit="handlePasswordSubmit(event)">
              <input
                type="password"
                id="passwordInput"
                placeholder="Enter password"
                class="w-full px-4 py-3 rounded-lg bg-purple-950/90 text-white border-2 border-pink-400 focus:outline-none focus:border-pink-300 mb-4"
              />
              <button
                type="submit"
                class="w-full bg-pink-500/90 text-white px-4 py-3 rounded-lg font-semibold hover:bg-pink-600/90 transition-all"
              >
                Enter Admin Mode
              </button>
            </form>
          </div>
        </div>

        <!-- Navigation -->
        <nav class="border-b border-pink-400/20 bg-purple-800/95">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
              <div class="flex items-center space-x-3">
                <svg class="w-10 h-10 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2L2 7l10 5 10-5-10-5z"></path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2 17l10 5 10-5"></path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2 12l10 5 10-5"></path>
                </svg>
                <div>
                  <h1 class="text-3xl font-bold text-yellow-400">
                    WIXIN AWARDS
                  </h1>
                  <p class="text-xs text-pink-300">Wixcelo Community</p>
                </div>
              </div>
              
              <div class="flex items-center space-x-4">
                <div class="relative">
                  <button onclick="toggleYearDropdown()" class="flex items-center space-x-2 px-4 py-2 bg-pink-500/90 text-white rounded-lg hover:bg-pink-600/90 transition-all">
                    <span class="font-bold">${selectedYear}</span>
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                  </button>
                  <div id="yearDropdown" class="absolute top-full mt-2 right-0 bg-purple-950/95 border border-pink-400 rounded-lg overflow-hidden shadow-lg z-50 hidden">
                    <button onclick="selectYear('2025')" class="block w-full px-6 py-2 text-left hover:bg-pink-500/90 transition-all ${selectedYear === '2025' ? 'bg-pink-500/90 text-white' : 'text-white'}">
                      2025
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </nav>

        <!-- Corner Admin Button -->
        <button
          onclick="toggleAdmin()"
          class="fixed bottom-4 right-4 p-2 bg-purple-900/80 hover:bg-purple-800/80 text-pink-400 rounded-lg transition-all z-40 border border-pink-400/50"
          title="${isAdmin ? 'Exit Admin Mode' : 'Admin Mode'}"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
          </svg>
        </button>

        <!-- Content -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
          <!-- Hero Section -->
          <div class="text-center space-y-6 mb-12">
            <div class="inline-block">
              <svg class="w-24 h-24 text-yellow-400 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <h2 class="text-6xl font-bold text-yellow-400">
              ${selectedYear} Wixin Awards
            </h2>
            <p class="text-2xl text-pink-300">
              Celebrating the Wixcelo Community
            </p>
            <div class="flex items-center justify-center space-x-8 text-lg text-purple-200">
              <div class="flex items-center space-x-2">
                <svg class="w-5 h-5 text-pink-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
                <span>${currentYearData.eventDate}</span>
              </div>
              <div class="flex items-center space-x-2">
                <svg class="w-5 h-5 text-pink-400" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path>
                </svg>
                <span>Hosted by Wixcelo</span>
              </div>
            </div>
          </div>

          ${isAdmin ? `
          <div class="mb-8 bg-purple-800/95 rounded-xl p-6 border-2 border-pink-400">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-2xl font-bold text-white">Admin Dashboard</h3>
              <button onclick="addCategory()" class="flex items-center space-x-2 bg-pink-500/90 text-white px-4 py-2 rounded-lg hover:bg-pink-600/90 transition-all">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                </svg>
                <span>Add Category</span>
              </button>
            </div>
            <p class="text-white">Edit categories, winners, and nominees for ${selectedYear}</p>
          </div>
          ` : ''}

          <!-- Winners Grid -->
          <div class="space-y-8">
            <h3 class="text-4xl font-bold text-center text-yellow-400 mb-8">
              ${selectedYear} Winners
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              ${currentYearData.categories.map((category, idx) => `
                <div class="bg-purple-800/95 rounded-xl p-6 border-2 border-pink-400 hover:shadow-lg transition-all relative">
                  ${isAdmin ? `
                  <button onclick="deleteCategory(${idx})" class="absolute top-2 right-2 p-1 bg-red-500 text-white rounded hover:bg-red-600">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                    </svg>
                  </button>
                  ` : ''}
                  <div class="text-5xl mb-4">${category.icon}</div>
                  ${isAdmin && editingCategory === idx ? `
                    <input
                      type="text"
                      value="${category.name}"
                      onchange="updateCategoryName(${idx}, this.value)"
                      class="w-full text-xl font-bold mb-2 bg-purple-950/90 text-white px-2 py-1 rounded"
                    />
                  ` : `
                    <h3 class="text-xl font-bold mb-2 text-white">${category.name}</h3>
                  `}
                  
                  <div class="mt-4 pt-4 border-t border-pink-400">
                    <p class="text-sm text-pink-400 mb-2">üèÜ WINNER</p>
                    ${isAdmin && editingCategory === idx ? `
                      <input
                        type="text"
                        value="${category.winner}"
                        onchange="updateWinner(${idx}, this.value)"
                        class="w-full text-lg font-bold bg-purple-950/90 text-white px-2 py-1 rounded"
                      />
                    ` : `
                      <p class="text-lg font-bold text-yellow-400">${category.winner}</p>
                    `}
                  </div>

                  <div class="mt-4 pt-4 border-t border-pink-400">
                    <p class="text-sm text-white mb-2">Nominees:</p>
                    ${isAdmin && editingCategory === idx ? `
                      <textarea
                        onchange="updateNominees(${idx}, this.value)"
                        class="w-full text-sm bg-purple-950/90 text-white px-2 py-1 rounded min-h-[100px]"
                        placeholder="One nominee per line"
                      >${category.nominees.join('\n')}</textarea>
                    ` : `
                      <ul class="text-sm text-purple-200 space-y-1">
                        ${category.nominees.map(nominee => `
                          <li class="flex items-start space-x-2">
                            <span class="text-pink-400 mt-1">‚Ä¢</span>
                            <span>${nominee}</span>
                          </li>
                        `).join('')}
                      </ul>
                    `}
                  </div>

                  ${isAdmin ? `
                  <button
                    onclick="toggleEdit(${idx})"
                    class="mt-4 w-full flex items-center justify-center space-x-2 bg-pink-500/90 text-white px-4 py-2 rounded-lg hover:bg-pink-600/90 transition-all"
                  >
                    ${editingCategory === idx ? `
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                      </svg>
                      <span>Done</span>
                    ` : `
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                      </svg>
                      <span>Edit</span>
                    `}
                  </button>
                  ` : ''}
                </div>
              `).join('')}
            </div>
          </div>

          <!-- Community Section -->
          <div class="mt-16 bg-purple-800/95 rounded-2xl p-8 text-center border-2 border-pink-400">
            <h3 class="text-3xl font-bold text-white mb-4">
              Join the Wixcelo Community!
            </h3>
            <p class="text-purple-200 text-lg mb-6">
              Be part of the most creative Minecraft community
            </p>
            <button class="bg-pink-500/90 text-white px-8 py-3 rounded-lg font-semibold hover:bg-pink-600/90 transition-all inline-flex items-center space-x-2">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path>
              </svg>
              <span>Subscribe to Wixcelo</span>
            </button>
          </div>
        </div>

        <!-- Footer -->
        <footer class="border-t border-pink-400/20 bg-purple-800/95 mt-20">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center">
            <p class="text-white">
              ¬© ${selectedYear} Wixin Awards - Wixcelo Community
            </p>
            <p class="text-sm text-pink-400 mt-2">
              Not affiliated with Mojang Studios or Microsoft
            </p>
          </div>
        </footer>
      `;

      // Store current data for editing
      window.currentAwardsData = awardsData;
    }

    // Global functions
    window.toggleYearDropdown = () => {
      const dropdown = document.getElementById('yearDropdown');
      dropdown.classList.toggle('hidden');
    };

    window.selectYear = (year) => {
      selectedYear = year;
      document.getElementById('yearDropdown').classList.add('hidden');
      loadData();
    };

    window.toggleAdmin = () => {
      if (isAdmin) {
        isAdmin = false;
        editingCategory = null;
        loadData();
      } else {
        document.getElementById('passwordModal').classList.remove('hidden');
      }
    };

    window.closePasswordModal = () => {
      document.getElementById('passwordModal').classList.add('hidden');
      document.getElementById('passwordInput').value = '';
    };

    window.handlePasswordSubmit = (e) => {
      e.preventDefault();
      const password = document.getElementById('passwordInput').value;
      if (password === 'wixin4eva') {
        isAdmin = true;
        closePasswordModal();
        loadData();
      } else {
        alert('Incorrect password');
        document.getElementById('passwordInput').value = '';
      }
    };

    window.toggleEdit = (idx) => {
      editingCategory = editingCategory === idx ? null : idx;
      loadData();
    };

    window.updateCategoryName = (idx, value) => {
      const data = window.currentAwardsData;
      data[selectedYear].categories[idx].name = value;
      saveData(data);
    };

    window.updateWinner = (idx, value) => {
      const data = window.currentAwardsData;
      data[selectedYear].categories[idx].winner = value;
      saveData(data);
    };

    window.updateNominees = (idx, value) => {
      const data = window.currentAwardsData;
      const nomineesArray = value.split('\n').filter(n => n.trim());
      data[selectedYear].categories[idx].nominees = nomineesArray;
      saveData(data);
    };

    window.deleteCategory = (idx) => {
      if (confirm('Are you sure you want to delete this category?')) {
        const data = window.currentAwardsData;
        data[selectedYear].categories.splice(idx, 1);
        saveData(data);
      }
    };

    window.addCategory = () => {
      const data = window.currentAwardsData;
      if (!data[selectedYear]) {
        data[selectedYear] = { eventDate: 'TBA', categories: [] };
      }
      data[selectedYear].categories.push({
        name: "New Category",
        icon: "üèÜ",
        winner: "",
        nominees: []
      });
      saveData(data);
    };

    // Initialize
    initializeData();
  </script>
</head>
<body class="bg-gradient-to-br from-purple-900 via-purple-800 to-indigo-900 min-h-screen">
  <div id="app"></div>
</body>
</html>
